<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íšŒì ˆ ê²©ì ì‹œê°í™” - d sin Î¸ = mÎ»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2em;
            background: linear-gradient(45deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .formula {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #ffd700;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
        }
        
        .controls {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #00d4ff;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #333;
            outline: none;
            -webkit-appearance: none;
        }
        
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00d4ff, #7b2cbf);
            cursor: pointer;
        }
        
        .value-display {
            text-align: right;
            font-size: 0.9em;
            color: #aaa;
            margin-top: 5px;
        }
        
        .visualization {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            overflow: hidden;
        }
        
        canvas {
            display: block;
        }
        
        .info-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .info-box {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .info-box h3 {
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        
        .info-box .value {
            font-size: 1.3em;
            color: #ffd700;
        }
        
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }
        
        .legend h3 {
            margin-bottom: 10px;
            color: #00d4ff;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
        }
        
        .constructive { background: #00ff00; }
        .destructive { background: #ff0000; }
        .partial { background: #ffff00; }
        
        .intensity-graph {
            margin-top: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            overflow: hidden;
        }
        
        .order-info {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            font-size: 0.85em;
        }
        
        .order-info h4 {
            color: #7b2cbf;
            margin-bottom: 8px;
        }
        
        .order-list {
            max-height: 150px;
            overflow-y: auto;
        }
        
        .order-item {
            padding: 5px;
            margin: 3px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒˆ íšŒì ˆ ê²©ì ì‹œê°í™”</h1>
        <div class="formula">d sin Î¸ = mÎ»</div>
        
        <div class="main-content">
            <div class="controls">
                <div class="control-group">
                    <label>ğŸ”¢ ìŠ¬ë¦¿ ê°œìˆ˜ (N)</label>
                    <input type="range" id="slitCount" min="2" max="20" value="5">
                    <div class="value-display" id="slitCountValue">5ê°œ</div>
                </div>
                
                <div class="control-group">
                    <label>ğŸ“ ìŠ¬ë¦¿ ê°„ê²© d (Î¼m)</label>
                    <input type="range" id="slitSpacing" min="1" max="10" step="0.1" value="3">
                    <div class="value-display" id="slitSpacingValue">3.0 Î¼m</div>
                </div>
                
                <div class="control-group">
                    <label>ğŸŒŠ íŒŒì¥ Î» (nm)</label>
                    <input type="range" id="wavelength" min="380" max="750" value="550">
                    <div class="value-display" id="wavelengthValue">550 nm (ë…¹ìƒ‰)</div>
                </div>
                
                <div class="control-group">
                    <label>ğŸ“ ìŠ¤í¬ë¦° ê±°ë¦¬ L (cm)</label>
                    <input type="range" id="screenDistance" min="10" max="100" value="50">
                    <div class="value-display" id="screenDistanceValue">50 cm</div>
                </div>
                
                <div class="control-group">
                    <label>â±ï¸ ì• ë‹ˆë©”ì´ì…˜ ì†ë„</label>
                    <input type="range" id="animSpeed" min="0.1" max="3" step="0.1" value="1">
                    <div class="value-display" id="animSpeedValue">1.0x</div>
                </div>
                
                <div class="control-group">
                    <label>
                        <input type="checkbox" id="showWaves" checked> íŒŒë™ í‘œì‹œ
                    </label>
                </div>
                
                <div class="control-group">
                    <label>
                        <input type="checkbox" id="showPaths" checked> ê²½ë¡œì°¨ í‘œì‹œ
                    </label>
                </div>
                
                <div class="legend">
                    <h3>ë²”ë¡€</h3>
                    <div class="legend-item">
                        <div class="legend-color constructive"></div>
                        <span>ë³´ê°• ê°„ì„­ (ë°ì€ ë¬´ëŠ¬)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color destructive"></div>
                        <span>ìƒì‡„ ê°„ì„­ (ì–´ë‘ìš´ ë¬´ëŠ¬)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color partial"></div>
                        <span>ë¶€ë¶„ ê°„ì„­</span>
                    </div>
                </div>
                
                <div class="order-info">
                    <h4>ğŸ“Š íšŒì ˆ ì°¨ìˆ˜ë³„ ìœ„ì¹˜</h4>
                    <div class="order-list" id="orderList"></div>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="visualization">
                    <canvas id="mainCanvas"></canvas>
                </div>
                
                <div class="intensity-graph">
                    <canvas id="intensityCanvas"></canvas>
                </div>
                
                <div class="info-panel">
                    <div class="info-box">
                        <h3>ì²« ë²ˆì§¸ ê·¹ëŒ€ ê°ë„ (m=1)</h3>
                        <div class="value" id="firstMaxAngle">-</div>
                    </div>
                    <div class="info-box">
                        <h3>ì²« ë²ˆì§¸ ê·¹ëŒ€ ìœ„ì¹˜</h3>
                        <div class="value" id="firstMaxPos">-</div>
                    </div>
                    <div class="info-box">
                        <h3>ìµœëŒ€ ê´€ì¸¡ ê°€ëŠ¥ ì°¨ìˆ˜</h3>
                        <div class="value" id="maxOrder">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Canvas ì„¤ì •
        const mainCanvas = document.getElementById('mainCanvas');
        const mainCtx = mainCanvas.getContext('2d');
        const intensityCanvas = document.getElementById('intensityCanvas');
        const intensityCtx = intensityCanvas.getContext('2d');
        
        // Canvas í¬ê¸° ì„¤ì •
        function resizeCanvases() {
            const container = document.querySelector('.visualization');
            mainCanvas.width = container.clientWidth;
            mainCanvas.height = 500;
            intensityCanvas.width = container.clientWidth;
            intensityCanvas.height = 150;
        }
        resizeCanvases();
        window.addEventListener('resize', resizeCanvases);
        
        // íŒŒë¼ë¯¸í„°
        let params = {
            slitCount: 5,
            slitSpacing: 3, // Î¼m
            wavelength: 550, // nm
            screenDistance: 50, // cm
            animSpeed: 1,
            showWaves: true,
            showPaths: true
        };
        
        let time = 0;
        
        // íŒŒì¥ì— ë”°ë¥¸ ìƒ‰ìƒ
        function wavelengthToColor(wavelength, alpha = 1) {
            let r, g, b;
            if (wavelength >= 380 && wavelength < 440) {
                r = -(wavelength - 440) / (440 - 380);
                g = 0;
                b = 1;
            } else if (wavelength >= 440 && wavelength < 490) {
                r = 0;
                g = (wavelength - 440) / (490 - 440);
                b = 1;
            } else if (wavelength >= 490 && wavelength < 510) {
                r = 0;
                g = 1;
                b = -(wavelength - 510) / (510 - 490);
            } else if (wavelength >= 510 && wavelength < 580) {
                r = (wavelength - 510) / (580 - 510);
                g = 1;
                b = 0;
            } else if (wavelength >= 580 && wavelength < 645) {
                r = 1;
                g = -(wavelength - 645) / (645 - 580);
                b = 0;
            } else if (wavelength >= 645 && wavelength <= 750) {
                r = 1;
                g = 0;
                b = 0;
            } else {
                r = 0; g = 0; b = 0;
            }
            
            return `rgba(${Math.round(r*255)}, ${Math.round(g*255)}, ${Math.round(b*255)}, ${alpha})`;
        }
        
        // íŒŒì¥ ì´ë¦„
        function getWavelengthName(wavelength) {
            if (wavelength < 450) return 'ë³´ë¼ìƒ‰';
            if (wavelength < 495) return 'íŒŒë€ìƒ‰';
            if (wavelength < 570) return 'ë…¹ìƒ‰';
            if (wavelength < 590) return 'ë…¸ë€ìƒ‰';
            if (wavelength < 620) return 'ì£¼í™©ìƒ‰';
            return 'ë¹¨ê°„ìƒ‰';
        }
        
        // íšŒì ˆ ê²©ì ê°•ë„ ê³„ì‚°
        function calculateIntensity(theta, N, d, lambda) {
            const k = 2 * Math.PI / (lambda * 1e-9);
            const dMeters = d * 1e-6;
            const beta = k * dMeters * Math.sin(theta) / 2;
            
            if (Math.abs(beta) < 1e-10) return N * N;
            
            const intensity = Math.pow(Math.sin(N * beta) / Math.sin(beta), 2);
            return Math.min(intensity, N * N);
        }
        
        // ë©”ì¸ ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸°
        function drawMainCanvas() {
            const width = mainCanvas.width;
            const height = mainCanvas.height;
            
            // ë°°ê²½
            mainCtx.fillStyle = '#0a0a1a';
            mainCtx.fillRect(0, 0, width, height);
            
            const gratingX = 150;
            const screenX = width - 100;
            const centerY = height / 2;
            
            // ê²©ì ê°„ê²© ì‹œê°í™” ìŠ¤ì¼€ì¼
            const visualSlitSpacing = Math.min(40, 300 / params.slitCount);
            const slitPositions = [];
            
            for (let i = 0; i < params.slitCount; i++) {
                const y = centerY + (i - (params.slitCount - 1) / 2) * visualSlitSpacing;
                slitPositions.push(y);
            }
            
            // ê²©ìíŒ ê·¸ë¦¬ê¸°
            mainCtx.fillStyle = '#333';
            mainCtx.fillRect(gratingX - 10, centerY - params.slitCount * visualSlitSpacing / 2 - 50, 20, params.slitCount * visualSlitSpacing + 100);
            
            // ìŠ¬ë¦¿ ê·¸ë¦¬ê¸°
            slitPositions.forEach((y, i) => {
                mainCtx.fillStyle = wavelengthToColor(params.wavelength);
                mainCtx.fillRect(gratingX - 5, y - 3, 10, 6);
                
                // ìŠ¬ë¦¿ ë²ˆí˜¸
                mainCtx.fillStyle = '#888';
                mainCtx.font = '10px Arial';
                mainCtx.fillText(`${i + 1}`, gratingX - 25, y + 3);
            });
            
            // íŒŒë™ ê·¸ë¦¬ê¸°
            if (params.showWaves) {
                const lambda = params.wavelength / 50; // ì‹œê°í™”ìš© íŒŒì¥
                const waveColor = wavelengthToColor(params.wavelength);
                
                slitPositions.forEach((slitY) => {
                    for (let angle = -Math.PI / 3; angle <= Math.PI / 3; angle += 0.02) {
                        const maxDist = screenX - gratingX;
                        
                        for (let dist = 0; dist < maxDist; dist += 2) {
                            const x = gratingX + dist * Math.cos(angle);
                            const y = slitY + dist * Math.sin(angle);
                            
                            if (x > screenX || y < 0 || y > height) continue;
                            
                            const phase = (dist - time * 3 * params.animSpeed) / lambda;
                            const amplitude = Math.sin(phase * 2 * Math.PI);
                            const alpha = (0.3 + 0.2 * amplitude) * (1 - dist / maxDist) * 0.5;
                            
                            mainCtx.fillStyle = wavelengthToColor(params.wavelength, Math.max(0, alpha));
                            mainCtx.fillRect(x, y, 2, 2);
                        }
                    }
                });
            }
            
            // ìŠ¤í¬ë¦° ê·¸ë¦¬ê¸°
            mainCtx.fillStyle = '#222';
            mainCtx.fillRect(screenX, 0, 80, height);
            
            // ìŠ¤í¬ë¦° ìœ„ì˜ ê°„ì„­ ë¬´ëŠ¬
            const dMeters = params.slitSpacing * 1e-6;
            const lambdaMeters = params.wavelength * 1e-9;
            const L = params.screenDistance / 100; // cm to m
            
            for (let py = 0; py < height; py++) {
                const screenY = (py - centerY) / (height / 2) * 0.05; // ìŠ¤í¬ë¦°ìƒ ìœ„ì¹˜ (m ë‹¨ìœ„ë¡œ ìŠ¤ì¼€ì¼)
                const theta = Math.atan(screenY / L);
                
                const intensity = calculateIntensity(theta, params.slitCount, params.slitSpacing, params.wavelength);
                const normalizedIntensity = intensity / (params.slitCount * params.slitCount);
                
                const color = wavelengthToColor(params.wavelength, normalizedIntensity);
                mainCtx.fillStyle = color;
                mainCtx.fillRect(screenX, py, 80, 1);
            }
            
            // ê²½ë¡œì°¨ í‘œì‹œ
            if (params.showPaths && slitPositions.length >= 2) {
                // ì²« ë²ˆì§¸ ì°¨ìˆ˜ ê·¹ëŒ€ ìœ„ì¹˜ë¡œ ê²½ë¡œ í‘œì‹œ
                const sinTheta = lambdaMeters / dMeters;
                if (sinTheta <= 1) {
                    const theta = Math.asin(sinTheta);
                    const screenYPos = centerY - Math.tan(theta) * (screenX - gratingX) * 0.3;
                    
                    if (screenYPos > 50 && screenYPos < height - 50) {
                        mainCtx.strokeStyle = 'rgba(255, 255, 0, 0.5)';
                        mainCtx.lineWidth = 2;
                        mainCtx.setLineDash([5, 5]);
                        
                        // ë‘ ìŠ¬ë¦¿ì—ì„œ ê°™ì€ ì ìœ¼ë¡œ ê°€ëŠ” ê²½ë¡œ
                        const slit1Y = slitPositions[0];
                        const slit2Y = slitPositions[1];
                        
                        mainCtx.beginPath();
                        mainCtx.moveTo(gratingX, slit1Y);
                        mainCtx.lineTo(screenX, screenYPos);
                        mainCtx.stroke();
                        
                        mainCtx.beginPath();
                        mainCtx.moveTo(gratingX, slit2Y);
                        mainCtx.lineTo(screenX, screenYPos);
                        mainCtx.stroke();
                        
                        mainCtx.setLineDash([]);
                        
                        // ê²½ë¡œì°¨ í‘œì‹œ
                        mainCtx.fillStyle = '#ffff00';
                        mainCtx.font = '12px Arial';
                        mainCtx.fillText('m=1 (ë³´ê°•)', screenX + 5, screenYPos - 10);
                        mainCtx.fillText(`ê²½ë¡œì°¨ = Î»`, screenX + 5, screenYPos + 15);
                    }
                }
            }
            
            // ë ˆì´ë¸”
            mainCtx.fillStyle = '#fff';
            mainCtx.font = '14px Arial';
            mainCtx.fillText('ì…ì‚¬ê´‘', 20, 30);
            mainCtx.fillText('íšŒì ˆê²©ì', gratingX - 25, 30);
            mainCtx.fillText('ìŠ¤í¬ë¦°', screenX + 10, 30);
            
            // ê²©ì ìƒìˆ˜ í‘œì‹œ
            if (slitPositions.length >= 2) {
                mainCtx.strokeStyle = '#00d4ff';
                mainCtx.lineWidth = 1;
                mainCtx.beginPath();
                mainCtx.moveTo(gratingX + 30, slitPositions[0]);
                mainCtx.lineTo(gratingX + 30, slitPositions[1]);
                mainCtx.stroke();
                
                mainCtx.beginPath();
                mainCtx.moveTo(gratingX + 25, slitPositions[0]);
                mainCtx.lineTo(gratingX + 35, slitPositions[0]);
                mainCtx.stroke();
                
                mainCtx.beginPath();
                mainCtx.moveTo(gratingX + 25, slitPositions[1]);
                mainCtx.lineTo(gratingX + 35, slitPositions[1]);
                mainCtx.stroke();
                
                mainCtx.fillStyle = '#00d4ff';
                mainCtx.font = '12px Arial';
                mainCtx.fillText('d', gratingX + 40, (slitPositions[0] + slitPositions[1]) / 2 + 4);
            }
            
            // ì…ì‚¬ íŒŒë™ í™”ì‚´í‘œ
            mainCtx.strokeStyle = wavelengthToColor(params.wavelength);
            mainCtx.lineWidth = 3;
            for (let i = 0; i < 5; i++) {
                const x = 50 + ((time * params.animSpeed * 20 + i * 30) % 80);
                mainCtx.beginPath();
                mainCtx.moveTo(x, centerY);
                mainCtx.lineTo(x + 15, centerY);
                mainCtx.stroke();
                
                mainCtx.beginPath();
                mainCtx.moveTo(x + 15, centerY);
                mainCtx.lineTo(x + 10, centerY - 5);
                mainCtx.lineTo(x + 10, centerY + 5);
                mainCtx.closePath();
                mainCtx.fillStyle = wavelengthToColor(params.wavelength);
                mainCtx.fill();
            }
        }
        
        // ê°•ë„ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
        function drawIntensityGraph() {
            const width = intensityCanvas.width;
            const height = intensityCanvas.height;
            
            // ë°°ê²½
            intensityCtx.fillStyle = '#0a0a1a';
            intensityCtx.fillRect(0, 0, width, height);
            
            // ê·¸ë¦¬ë“œ
            intensityCtx.strokeStyle = '#333';
            intensityCtx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                const x = (i / 10) * width;
                intensityCtx.beginPath();
                intensityCtx.moveTo(x, 0);
                intensityCtx.lineTo(x, height);
                intensityCtx.stroke();
            }
            
            // ê°•ë„ ê·¸ë˜í”„
            const dMeters = params.slitSpacing * 1e-6;
            const lambdaMeters = params.wavelength * 1e-9;
            const maxOrder = Math.floor(dMeters / lambdaMeters);
            
            intensityCtx.beginPath();
            intensityCtx.strokeStyle = wavelengthToColor(params.wavelength);
            intensityCtx.lineWidth = 2;
            
            const maxIntensity = params.slitCount * params.slitCount;
            
            for (let px = 0; px < width; px++) {
                const theta = ((px / width) - 0.5) * Math.PI / 3; // -30Â° to +30Â°
                const intensity = calculateIntensity(theta, params.slitCount, params.slitSpacing, params.wavelength);
                const normalizedIntensity = intensity / maxIntensity;
                
                const y = height - normalizedIntensity * (height - 20) - 10;
                
                if (px === 0) {
                    intensityCtx.moveTo(px, y);
                } else {
                    intensityCtx.lineTo(px, y);
                }
            }
            intensityCtx.stroke();
            
            // ì±„ìš°ê¸°
            intensityCtx.lineTo(width, height);
            intensityCtx.lineTo(0, height);
            intensityCtx.closePath();
            intensityCtx.fillStyle = wavelengthToColor(params.wavelength, 0.3);
            intensityCtx.fill();
            
            // ê·¹ëŒ€ ìœ„ì¹˜ í‘œì‹œ
            for (let m = -maxOrder; m <= maxOrder; m++) {
                const sinTheta = m * lambdaMeters / dMeters;
                if (Math.abs(sinTheta) <= 1) {
                    const theta = Math.asin(sinTheta);
                    const px = (theta / (Math.PI / 3) + 0.5) * width;
                    
                    if (px >= 0 && px <= width) {
                        intensityCtx.fillStyle = m === 0 ? '#ffffff' : '#00ff00';
                        intensityCtx.beginPath();
                        intensityCtx.arc(px, 15, 5, 0, Math.PI * 2);
                        intensityCtx.fill();
                        
                        intensityCtx.fillStyle = '#fff';
                        intensityCtx.font = '10px Arial';
                        intensityCtx.textAlign = 'center';
                        intensityCtx.fillText(`m=${m}`, px, 30);
                    }
                }
            }
            
            // ì¶• ë ˆì´ë¸”
            intensityCtx.fillStyle = '#888';
            intensityCtx.font = '12px Arial';
            intensityCtx.textAlign = 'left';
            intensityCtx.fillText('ê°•ë„ I', 10, 15);
            intensityCtx.textAlign = 'center';
            intensityCtx.fillText('-30Â°', 10, height - 5);
            intensityCtx.fillText('0Â°', width / 2, height - 5);
            intensityCtx.fillText('+30Â°', width - 20, height - 5);
            intensityCtx.fillText('Î¸ (íšŒì ˆê°)', width / 2, height - 5);
        }
        
        // ì •ë³´ ì—…ë°ì´íŠ¸
        function updateInfo() {
            const dMeters = params.slitSpacing * 1e-6;
            const lambdaMeters = params.wavelength * 1e-9;
            const L = params.screenDistance / 100;
            
            // ì²« ë²ˆì§¸ ê·¹ëŒ€ ê°ë„
            const sinTheta1 = lambdaMeters / dMeters;
            if (sinTheta1 <= 1) {
                const theta1 = Math.asin(sinTheta1) * 180 / Math.PI;
                document.getElementById('firstMaxAngle').textContent = theta1.toFixed(2) + 'Â°';
                
                // ì²« ë²ˆì§¸ ê·¹ëŒ€ ìœ„ì¹˜
                const y1 = L * Math.tan(theta1 * Math.PI / 180) * 100; // cm
                document.getElementById('firstMaxPos').textContent = y1.toFixed(2) + ' cm';
            } else {
                document.getElementById('firstMaxAngle').textContent = 'ê´€ì¸¡ ë¶ˆê°€';
                document.getElementById('firstMaxPos').textContent = '-';
            }
            
            // ìµœëŒ€ ì°¨ìˆ˜
            const maxOrder = Math.floor(dMeters / lambdaMeters);
            document.getElementById('maxOrder').textContent = `Â±${maxOrder}`;
            
            // ì°¨ìˆ˜ë³„ ìœ„ì¹˜ ëª©ë¡
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = '';
            
            for (let m = -maxOrder; m <= maxOrder; m++) {
                const sinTheta = m * lambdaMeters / dMeters;
                if (Math.abs(sinTheta) <= 1) {
                    const theta = Math.asin(sinTheta);
                    const y = L * Math.tan(theta) * 100; // cm
                    
                    const div = document.createElement('div');
                    div.className = 'order-item';
                    div.innerHTML = `
                        <span>m = ${m >= 0 ? '+' : ''}${m}</span>
                        <span>Î¸ = ${(theta * 180 / Math.PI).toFixed(1)}Â°</span>
                        <span>y = ${y.toFixed(2)} cm</span>
                    `;
                    orderList.appendChild(div);
                }
            }
        }
        
        // ì»¨íŠ¸ë¡¤ ì´ë²¤íŠ¸
        function setupControls() {
            document.getElementById('slitCount').addEventListener('input', (e) => {
                params.slitCount = parseInt(e.target.value);
                document.getElementById('slitCountValue').textContent = params.slitCount + 'ê°œ';
                updateInfo();
            });
            
            document.getElementById('slitSpacing').addEventListener('input', (e) => {
                params.slitSpacing = parseFloat(e.target.value);
                document.getElementById('slitSpacingValue').textContent = params.slitSpacing.toFixed(1) + ' Î¼m';
                updateInfo();
            });
            
            document.getElementById('wavelength').addEventListener('input', (e) => {
                params.wavelength = parseInt(e.target.value);
                document.getElementById('wavelengthValue').textContent = 
                    params.wavelength + ' nm (' + getWavelengthName(params.wavelength) + ')';
                updateInfo();
            });
            
            document.getElementById('screenDistance').addEventListener('input', (e) => {
                params.screenDistance = parseInt(e.target.value);
                document.getElementById('screenDistanceValue').textContent = params.screenDistance + ' cm';
                updateInfo();
            });
            
            document.getElementById('animSpeed').addEventListener('input', (e) => {
                params.animSpeed = parseFloat(e.target.value);
                document.getElementById('animSpeedValue').textContent = params.animSpeed.toFixed(1) + 'x';
            });
            
            document.getElementById('showWaves').addEventListener('change', (e) => {
                params.showWaves = e.target.checked;
            });
            
            document.getElementById('showPaths').addEventListener('change', (e) => {
                params.showPaths = e.target.checked;
            });
        }
        
        // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
        function animate() {
            time += 0.016;
            drawMainCanvas();
            drawIntensityGraph();
            requestAnimationFrame(animate);
        }
        
        // ì´ˆê¸°í™”
        setupControls();
        updateInfo();
        animate();
    </script>
</body>
</html>