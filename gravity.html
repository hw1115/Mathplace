<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIGO ì¤‘ë ¥íŒŒ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .info-box h2 {
            margin-bottom: 10px;
        }
        
        .info-box p {
            line-height: 1.6;
        }
        
        .simulation-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .canvas-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .canvas-container h3 {
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        canvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 8px;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .input-container {
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
        }
        
        .control-group input[type="number"] {
            width: 200px;
            padding: 12px 20px;
            font-size: 1.1em;
            border: 2px solid #667eea;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .control-group input[type="number"]:focus {
            border-color: #764ba2;
        }
        
        .unit-label {
            font-size: 0.95em;
            color: #666;
            font-weight: normal;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .measurements {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .measurement-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #667eea;
        }
        
        .measurement-box h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .measurement-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            font-family: 'Courier New', monospace;
        }
        
        .status {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .status.idle {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .status.detecting {
            background: #fff3e0;
            color: #f57c00;
            animation: pulse 1s infinite;
        }
        
        .status.detected {
            background: #e8f5e9;
            color: #388e3c;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @media (max-width: 968px) {
            .simulation-area {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŒ LIGO ì¤‘ë ¥íŒŒ ê²€ì¶œ ì‹œë®¬ë ˆì´ì…˜</h1>
        <p class="subtitle">Laser Interferometer Gravitational-Wave Observatory</p>
        
        <div class="info-box">
            <h2>ğŸ“¡ LIGOë€?</h2>
            <p>
                LIGO(ë¼ì´ê³ )ëŠ” ë ˆì´ì € ê°„ì„­ê³„ ì¤‘ë ¥íŒŒ ê´€ì¸¡ì†Œë¡œ, ë¸”ë™í™€ ì¶©ëŒì´ë‚˜ ì¤‘ì„±ìë³„ í•©ë³‘ê³¼ ê°™ì€ ìš°ì£¼ì˜ ê²©ë ¬í•œ ì‚¬ê±´ì—ì„œ 
                ë°œìƒí•˜ëŠ” ì¤‘ë ¥íŒŒë¥¼ ê²€ì¶œí•©ë‹ˆë‹¤. LIGOëŠ” Lì í˜•íƒœì˜ 4km ê¸¸ì´ íŒ”ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì¤‘ë ¥íŒŒê°€ ì§€ë‚˜ê°ˆ ë•Œ 
                ì‹œê³µê°„ì˜ ì™œê³¡ìœ¼ë¡œ ì¸í•´ íŒ”ì˜ ê¸¸ì´ê°€ 10<sup>-18</sup>m (ì–‘ì„±ì í¬ê¸°ì˜ 1/1000) ìˆ˜ì¤€ìœ¼ë¡œ ë³€í™”í•©ë‹ˆë‹¤. 
                ì´ëŸ¬í•œ ë¯¸ì„¸í•œ ë³€í™”ë¥¼ ë ˆì´ì € ê°„ì„­ê³„ë¡œ ì¸¡ì •í•˜ì—¬ ì¤‘ë ¥íŒŒë¥¼ ê²€ì¶œí•©ë‹ˆë‹¤.
            </p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label style="text-align: center;">
                    ì¤‘ë ¥íŒŒ ì„¸ê¸° (Strain)
                </label>
                <div class="input-container">
                    <input type="number" id="strainInput" min="0.1" max="50" step="0.1" value="5.0">
                    <span class="unit-label">Ã— 10<sup>-21</sup></span>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button id="generateBtn">ğŸŒŠ ì¤‘ë ¥íŒŒ ë°œìƒ!</button>
            </div>
            
            <div class="status idle" id="status">
                ëŒ€ê¸° ì¤‘ - ë°°ê²½ ì¡ìŒë§Œ ê°ì§€ë¨
            </div>
        </div>
        
        <div class="simulation-area">
            <div class="canvas-container">
                <h3>ì¤‘ë ¥íŒŒ ì „íŒŒ (ìš°ì£¼ ê³µê°„)</h3>
                <canvas id="waveCanvas" width="600" height="400"></canvas>
            </div>
            
            <div class="canvas-container">
                <h3>LIGO ê²€ì¶œê¸° (Lìí˜• ê°„ì„­ê³„)</h3>
                <canvas id="ligoCanvas" width="600" height="400"></canvas>
            </div>
        </div>
        
        <div class="canvas-container">
            <h3>ê²€ì¶œ ì‹ í˜¸ (ì‹œê°„ì— ë”°ë¥¸ ë³€í˜•ë¥ )</h3>
            <canvas id="signalCanvas" width="1200" height="250"></canvas>
            
            <div class="measurements">
                <div class="measurement-box">
                    <h4>Xì¶• íŒ” ê¸¸ì´</h4>
                    <div class="measurement-value" id="xArmLength">4.000000000 km</div>
                </div>
                <div class="measurement-box">
                    <h4>Yì¶• íŒ” ê¸¸ì´</h4>
                    <div class="measurement-value" id="yArmLength">4.000000000 km</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Canvas ì„¤ì •
        const waveCanvas = document.getElementById('waveCanvas');
        const ligoCanvas = document.getElementById('ligoCanvas');
        const signalCanvas = document.getElementById('signalCanvas');
        
        const waveCtx = waveCanvas.getContext('2d');
        const ligoCtx = ligoCanvas.getContext('2d');
        const signalCtx = signalCanvas.getContext('2d');
        
        // ì‹œë®¬ë ˆì´ì…˜ ë³€ìˆ˜
        let time = 0;
        let isWaveActive = false;
        let waveStartTime = 0;
        let waveSourceX = 0;
        let waveSourceY = 0;
        let currentStrain = 5.0;
        let signalData = [];
        const maxSignalPoints = 500;
        const baseArmLength = 4000; // meters (4km)
        let isWaveDetected = false;
        
        // LIGO ìœ„ì¹˜ (ì˜¤ë¥¸ìª½ ì•„ë˜)
        const ligoX = waveCanvas.width * 0.75;
        const ligoY = waveCanvas.height * 0.65;
        
        // UI ì—…ë°ì´íŠ¸
        const strainInput = document.getElementById('strainInput');
        const generateBtn = document.getElementById('generateBtn');
        const statusDiv = document.getElementById('status');
        const xArmLengthDiv = document.getElementById('xArmLength');
        const yArmLengthDiv = document.getElementById('yArmLength');
        
        strainInput.addEventListener('input', (e) => {
            currentStrain = parseFloat(e.target.value) || 5.0;
        });
        
        generateBtn.addEventListener('click', () => {
            // ëœë¤í•œ ìœ„ì¹˜ì—ì„œ ì¤‘ë ¥íŒŒ ë°œìƒ (LIGOì™€ ì¶©ë¶„íˆ ë–¨ì–´ì§„ ê³³)
            let attempts = 0;
            do {
                waveSourceX = Math.random() * waveCanvas.width;
                waveSourceY = Math.random() * waveCanvas.height;
                const distToLigo = Math.sqrt(
                    Math.pow(waveSourceX - ligoX, 2) + 
                    Math.pow(waveSourceY - ligoY, 2)
                );
                attempts++;
                // LIGOì—ì„œ ìµœì†Œ 150px ë–¨ì–´ì§„ ê³³ì—ì„œ ë°œìƒ
                if (distToLigo >= 150 || attempts > 50) break;
            } while (true);
            
            isWaveActive = true;
            isWaveDetected = false;
            waveStartTime = time;
            statusDiv.className = 'status detecting';
            statusDiv.textContent = 'âš ï¸ ì¤‘ë ¥íŒŒ ì „íŒŒ ì¤‘...';
        });
        
        // ì¡ìŒ ìƒì„± (ê°€ìš°ì‹œì•ˆ ë¶„í¬)
        function gaussianRandom(mean = 0, sigma = 1) {
            let u1 = Math.random();
            let u2 = Math.random();
            let z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
            return z0 * sigma + mean;
        }
        
        // ì¤‘ë ¥íŒŒ ì‹ í˜¸ (chirp íŒ¨í„´)
        function gravitationalWaveSignal(t, strain) {
            const frequency = 35 + t * 100; // ì£¼íŒŒìˆ˜ ì¦ê°€ (chirp)
            const amplitude = strain * (1 + t * 2) * Math.exp(-t * 0.5);
            return amplitude * Math.sin(2 * Math.PI * frequency * t);
        }
        
        // ì¤‘ë ¥íŒŒ ì „íŒŒ ê·¸ë¦¬ê¸°
        function drawWave() {
            waveCtx.fillStyle = '#000';
            waveCtx.fillRect(0, 0, waveCanvas.width, waveCanvas.height);
            
            // ë³„ ë°°ê²½
            waveCtx.fillStyle = 'white';
            for (let i = 0; i < 100; i++) {
                const x = (i * 67 + time * 2) % waveCanvas.width;
                const y = (i * 53) % waveCanvas.height;
                const size = (i % 3) * 0.5 + 0.5;
                waveCtx.beginPath();
                waveCtx.arc(x, y, size, 0, 2 * Math.PI);
                waveCtx.fill();
            }
            
            // ì¤‘ë ¥íŒŒ ì› ê·¸ë¦¬ê¸°
            if (isWaveActive) {
                const waveAge = time - waveStartTime;
                const maxRadius = Math.max(waveCanvas.width, waveCanvas.height) * 1.5;
                
                // ì¤‘ë ¥íŒŒ ë°œìƒ ìœ„ì¹˜ í‘œì‹œ
                waveCtx.fillStyle = '#ffd700';
                waveCtx.shadowColor = '#ffd700';
                waveCtx.shadowBlur = 20;
                waveCtx.beginPath();
                waveCtx.arc(waveSourceX, waveSourceY, 10, 0, 2 * Math.PI);
                waveCtx.fill();
                waveCtx.shadowBlur = 0;
                
                // í„ìŠ¤ íš¨ê³¼
                const pulseRadius = (waveAge * 30) % 20 + 10;
                waveCtx.strokeStyle = `rgba(255, 215, 0, ${1 - (pulseRadius - 10) / 20})`;
                waveCtx.lineWidth = 2;
                waveCtx.beginPath();
                waveCtx.arc(waveSourceX, waveSourceY, pulseRadius, 0, 2 * Math.PI);
                waveCtx.stroke();
                
                waveCtx.fillStyle = 'white';
                waveCtx.font = 'bold 13px Arial';
                waveCtx.fillText('âš¡ ì¤‘ë ¥íŒŒì›', waveSourceX + 15, waveSourceY - 10);
                waveCtx.font = '10px Arial';
                waveCtx.fillText('(ë¸”ë™í™€ ì¶©ëŒ)', waveSourceX + 15, waveSourceY + 5);
                
                // ì¤‘ë ¥íŒŒ ì „íŒŒ (ë™ì‹¬ì›)
                for (let i = 0; i < 8; i++) {
                    const radius = (waveAge * 120 - i * 40);
                    if (radius > 0 && radius < maxRadius) {
                        const alpha = Math.max(0, 1 - (radius / maxRadius));
                        waveCtx.strokeStyle = `rgba(100, 200, 255, ${alpha * 0.7})`;
                        waveCtx.lineWidth = 4;
                        waveCtx.beginPath();
                        waveCtx.arc(waveSourceX, waveSourceY, radius, 0, 2 * Math.PI);
                        waveCtx.stroke();
                    }
                }
                
                // ì¤‘ë ¥íŒŒê°€ LIGO ìœ„ì¹˜ì— ë„ë‹¬í–ˆëŠ”ì§€ í‘œì‹œ
                const currentWaveRadius = waveAge * 120;
                const distanceToLigo = Math.sqrt(
                    Math.pow(ligoX - waveSourceX, 2) + 
                    Math.pow(ligoY - waveSourceY, 2)
                );
                
                if (currentWaveRadius >= distanceToLigo && !isWaveDetected) {
                    isWaveDetected = true;
                }
                
                // LIGOê°€ ì¤‘ë ¥íŒŒë¥¼ ê°ì§€í•˜ë©´ ê°•ì¡°
                if (isWaveDetected && waveAge < distanceToLigo / 120 + 3) {
                    waveCtx.strokeStyle = '#00ff00';
                    waveCtx.lineWidth = 3;
                    waveCtx.beginPath();
                    waveCtx.arc(ligoX, ligoY, 20 + Math.sin(time * 10) * 3, 0, 2 * Math.PI);
                    waveCtx.stroke();
                }
            }
            
            // LIGO ìœ„ì¹˜ í‘œì‹œ
            waveCtx.fillStyle = '#ff6b6b';
            waveCtx.shadowColor = '#ff6b6b';
            waveCtx.shadowBlur = 15;
            waveCtx.beginPath();
            waveCtx.arc(ligoX, ligoY, 12, 0, 2 * Math.PI);
            waveCtx.fill();
            waveCtx.shadowBlur = 0;
            
            // LIGO ì™¸ê³½ í‘œì‹œ
            waveCtx.strokeStyle = '#ff6b6b';
            waveCtx.lineWidth = 2;
            waveCtx.beginPath();
            waveCtx.arc(ligoX, ligoY, 18, 0, 2 * Math.PI);
            waveCtx.stroke();
            
            waveCtx.fillStyle = 'white';
            waveCtx.font = 'bold 14px Arial';
            waveCtx.fillText('ğŸ”¬ LIGO ê²€ì¶œê¸°', ligoX + 25, ligoY + 5);
        }
        
        // LIGO ê²€ì¶œê¸° ê·¸ë¦¬ê¸°
        function drawLIGO(strain) {
            ligoCtx.fillStyle = '#f0f0f0';
            ligoCtx.fillRect(0, 0, ligoCanvas.width, ligoCanvas.height);
            
            const centerX = ligoCanvas.width / 2;
            const centerY = ligoCanvas.height / 2;
            const armLength = 150;
            
            // í‰ì†Œì—ëŠ” ê±°ì˜ ë³€í•˜ì§€ ì•Šê³ , ì¤‘ë ¥íŒŒ ê°ì§€ ì‹œì—ë§Œ ë¯¸ì„¸í•˜ê²Œ ë³€í˜•
            let deformation = 0;
            if (isWaveDetected && isWaveActive) {
                // ì¤‘ë ¥íŒŒ ê°ì§€ ì‹œì—ë§Œ ë³€í˜• ì ìš© (ë§¤ìš° ë¯¸ì„¸í•˜ê²Œ)
                deformation = strain * 0.15; // ì‹œê°ì ìœ¼ë¡œ ì•„ì£¼ ì¡°ê¸ˆë§Œ ë³´ì´ê²Œ
            }
            
            const xLength = armLength * (1 + deformation * 0.01);
            const yLength = armLength * (1 - deformation * 0.01);
            
            // ê²©ì ë°°ê²½
            ligoCtx.strokeStyle = '#e0e0e0';
            ligoCtx.lineWidth = 1;
            for (let i = 0; i < ligoCanvas.width; i += 20) {
                ligoCtx.beginPath();
                ligoCtx.moveTo(i, 0);
                ligoCtx.lineTo(i, ligoCanvas.height);
                ligoCtx.stroke();
            }
            for (let i = 0; i < ligoCanvas.height; i += 20) {
                ligoCtx.beginPath();
                ligoCtx.moveTo(0, i);
                ligoCtx.lineTo(ligoCanvas.width, i);
                ligoCtx.stroke();
            }
            
            // ë ˆì´ì € ë¹” íš¨ê³¼ (ë„“ê²Œ)
            ligoCtx.strokeStyle = 'rgba(255, 0, 0, 0.08)';
            ligoCtx.lineWidth = 20;
            ligoCtx.beginPath();
            ligoCtx.moveTo(centerX, centerY);
            ligoCtx.lineTo(centerX + xLength, centerY);
            ligoCtx.stroke();
            
            ligoCtx.strokeStyle = 'rgba(0, 255, 255, 0.08)';
            ligoCtx.beginPath();
            ligoCtx.moveTo(centerX, centerY);
            ligoCtx.lineTo(centerX, centerY - yLength);
            ligoCtx.stroke();
            
            // ë ˆì´ì € ë¹” ì¤‘ì‹¬ì„ 
            ligoCtx.strokeStyle = 'rgba(255, 0, 0, 0.3)';
            ligoCtx.lineWidth = 2;
            ligoCtx.beginPath();
            ligoCtx.moveTo(centerX, centerY);
            ligoCtx.lineTo(centerX + xLength, centerY);
            ligoCtx.stroke();
            
            ligoCtx.strokeStyle = 'rgba(0, 255, 255, 0.3)';
            ligoCtx.beginPath();
            ligoCtx.moveTo(centerX, centerY);
            ligoCtx.lineTo(centerX, centerY - yLength);
            ligoCtx.stroke();
            
            // Xì¶• íŒ”
            ligoCtx.strokeStyle = '#ff6b6b';
            ligoCtx.lineWidth = 8;
            ligoCtx.beginPath();
            ligoCtx.moveTo(centerX, centerY);
            ligoCtx.lineTo(centerX + xLength, centerY);
            ligoCtx.stroke();
            
            // Yì¶• íŒ”
            ligoCtx.strokeStyle = '#4ecdc4';
            ligoCtx.lineWidth = 8;
            ligoCtx.beginPath();
            ligoCtx.moveTo(centerX, centerY);
            ligoCtx.lineTo(centerX, centerY - yLength);
            ligoCtx.stroke();
            
            // ëì  í‘œì‹œ
            ligoCtx.fillStyle = '#ff6b6b';
            ligoCtx.beginPath();
            ligoCtx.arc(centerX + xLength, centerY, 6, 0, 2 * Math.PI);
            ligoCtx.fill();
            
            ligoCtx.fillStyle = '#4ecdc4';
            ligoCtx.beginPath();
            ligoCtx.arc(centerX, centerY - yLength, 6, 0, 2 * Math.PI);
            ligoCtx.fill();
            
            // ì¤‘ì‹¬ì 
            ligoCtx.fillStyle = '#333';
            ligoCtx.beginPath();
            ligoCtx.arc(centerX, centerY, 10, 0, 2 * Math.PI);
            ligoCtx.fill();
            
            // ë ˆì´ë¸”
            ligoCtx.fillStyle = '#333';
            ligoCtx.font = 'bold 14px Arial';
            ligoCtx.fillText('X arm (4km)', centerX + xLength - 70, centerY - 15);
            ligoCtx.fillText('Y arm (4km)', centerX + 15, centerY - yLength + 20);
            
            // íŒ” ê¸¸ì´ ì—…ë°ì´íŠ¸
            // í‰ì†Œì—ëŠ” ì •í™•íˆ 4km, ì¤‘ë ¥íŒŒ ê°ì§€ì‹œì—ë§Œ ë¯¸ì„¸í•˜ê²Œ ë³€í™”
            let xActualLength, yActualLength;
            if (isWaveDetected && isWaveActive) {
                xActualLength = baseArmLength * (1 + strain * 1e-21);
                yActualLength = baseArmLength * (1 - strain * 1e-21);
            } else {
                xActualLength = baseArmLength;
                yActualLength = baseArmLength;
            }
            
            xArmLengthDiv.textContent = (xActualLength / 1000).toFixed(12) + ' km';
            yArmLengthDiv.textContent = (yActualLength / 1000).toFixed(12) + ' km';
        }
        
        // ì‹ í˜¸ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
        function drawSignal() {
            signalCtx.fillStyle = 'white';
            signalCtx.fillRect(0, 0, signalCanvas.width, signalCanvas.height);
            
            // ì¶• ê·¸ë¦¬ê¸°
            signalCtx.strokeStyle = '#ddd';
            signalCtx.lineWidth = 1;
            
            // ìˆ˜í‰ ê²©ì
            for (let i = 0; i <= 10; i++) {
                const y = (signalCanvas.height / 10) * i;
                signalCtx.beginPath();
                signalCtx.moveTo(0, y);
                signalCtx.lineTo(signalCanvas.width, y);
                signalCtx.stroke();
            }
            
            // ì¤‘ì‹¬ì„ 
            signalCtx.strokeStyle = '#999';
            signalCtx.lineWidth = 2;
            signalCtx.beginPath();
            signalCtx.moveTo(0, signalCanvas.height / 2);
            signalCtx.lineTo(signalCanvas.width, signalCanvas.height / 2);
            signalCtx.stroke();
            
            // Yì¶• ìŠ¤ì¼€ì¼ í‘œì‹œ
            signalCtx.fillStyle = '#666';
            signalCtx.font = '11px Arial';
            signalCtx.textAlign = 'right';
            signalCtx.fillText('+20', 30, 15);
            signalCtx.fillText('0', 30, signalCanvas.height / 2 + 4);
            signalCtx.fillText('-20', 30, signalCanvas.height - 5);
            
            // ì‹ í˜¸ ê·¸ë¦¬ê¸°
            if (signalData.length > 1) {
                signalCtx.strokeStyle = '#667eea';
                signalCtx.lineWidth = 2;
                signalCtx.beginPath();
                
                const xStep = signalCanvas.width / maxSignalPoints;
                signalData.forEach((value, index) => {
                    const x = index * xStep;
                    // Yì¶• ìŠ¤ì¼€ì¼ ì¡°ì • (Â±20 ë²”ìœ„)
                    const y = signalCanvas.height / 2 - value * (signalCanvas.height / 40);
                    
                    if (index === 0) {
                        signalCtx.moveTo(x, y);
                    } else {
                        signalCtx.lineTo(x, y);
                    }
                });
                
                signalCtx.stroke();
            }
            
            // ì¶• ë ˆì´ë¸”
            signalCtx.fillStyle = '#333';
            signalCtx.font = 'bold 12px Arial';
            signalCtx.textAlign = 'left';
            signalCtx.fillText('ë³€í˜•ë¥  (Strain Ã— 10â»Â²Â¹)', 40, 20);
            signalCtx.fillText('ì‹œê°„ â†’', signalCanvas.width - 70, signalCanvas.height - 10);
        }
        
        // ë©”ì¸ ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
        function animate() {
            time += 0.016; // ~60fps
            
            let currentSignal = 0;
            
            // ì¤‘ë ¥íŒŒê°€ í™œì„±í™”ë˜ì–´ ìˆê³ , LIGOì— ë„ë‹¬í•œ ê²½ìš°
            if (isWaveActive) {
                const waveAge = time - waveStartTime;
                const waveSpeed = 120; // ì „íŒŒ ì†ë„
                const currentWaveRadius = waveAge * waveSpeed;
                
                // LIGOê¹Œì§€ì˜ ê±°ë¦¬ ê³„ì‚°
                const distanceToLigo = Math.sqrt(
                    Math.pow(ligoX - waveSourceX, 2) + 
                    Math.pow(ligoY - waveSourceY, 2)
                );
                
                // ì¤‘ë ¥íŒŒê°€ LIGOì— ë„ë‹¬í–ˆëŠ”ì§€ í™•ì¸
                if (currentWaveRadius >= distanceToLigo && waveAge < distanceToLigo / waveSpeed + 3) {
                    // ì¤‘ë ¥íŒŒ ì‹ í˜¸
                    const signalTime = waveAge - (distanceToLigo / waveSpeed);
                    currentSignal = gravitationalWaveSignal(signalTime, currentStrain);
                    
                    if (!isWaveDetected) {
                        isWaveDetected = true;
                    }
                    
                    statusDiv.className = 'status detected';
                    statusDiv.textContent = 'âœ… ì¤‘ë ¥íŒŒ ê²€ì¶œ ì„±ê³µ! ë¸”ë™í™€ ì¶©ëŒ ê°ì§€';
                } else if (waveAge >= distanceToLigo / waveSpeed + 3) {
                    isWaveActive = false;
                    isWaveDetected = false;
                    statusDiv.className = 'status idle';
                    statusDiv.textContent = 'ëŒ€ê¸° ì¤‘ - ë°°ê²½ ì¡ìŒë§Œ ê°ì§€ë¨';
                } else {
                    // ì•„ì§ ë„ë‹¬í•˜ì§€ ì•ŠìŒ
                    currentSignal = gaussianRandom(0, 0.3);
                }
            } else {
                // ë°°ê²½ ì¡ìŒë§Œ (Â±1Ïƒ)
                currentSignal = gaussianRandom(0, 0.3);
            }
            
            // ì‹ í˜¸ ë°ì´í„° ì €ì¥
            signalData.push(currentSignal);
            if (signalData.length > maxSignalPoints) {
                signalData.shift();
            }
            
            // ê·¸ë¦¬ê¸°
            drawWave();
            drawLIGO(currentSignal);
            drawSignal();
            
            requestAnimationFrame(animate);
        }
        
        // ì‹œì‘
        animate();
    </script>
</body>
</html>